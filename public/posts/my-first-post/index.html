<!DOCTYPE html>
<html><head lang="en"><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Labels, not boxes - jradhima</title><link rel="icon" type="image/png" href=https://raw.githubusercontent.com/jradhima/jradhima.github.io/refs/heads/main/static/favicon.ico /><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="One of my favourite topics is how variables work in Python. Python&rsquo;s variables don&rsquo;t store the data itself, instead they act as references to objects in memory. Python doesn&rsquo;t have pointers but in reality, I would argue it just hides them in plain sight!
Disclaimer: This post is insired by material from the excellent book by Luciano Ramalho, Fluent Python
Variables as Labels üè∑Ô∏è
Think of a variable as a label that you can attach to an object. When you write x = 10, you&rsquo;re not putting the number 10 into a box called x. Instead, you&rsquo;re creating an object in memory with the value 10 and then attaching the label x to it." />
	<meta property="og:image" content=""/>
	<meta property="og:url" content="http://localhost:1313/posts/my-first-post/">
  <meta property="og:site_name" content="jradhima">
  <meta property="og:title" content="Labels, not boxes">
  <meta property="og:description" content="One of my favourite topics is how variables work in Python. Python‚Äôs variables don‚Äôt store the data itself, instead they act as references to objects in memory. Python doesn‚Äôt have pointers but in reality, I would argue it just hides them in plain sight!
Disclaimer: This post is insired by material from the excellent book by Luciano Ramalho, Fluent Python
Variables as Labels üè∑Ô∏è Think of a variable as a label that you can attach to an object. When you write x = 10, you‚Äôre not putting the number 10 into a box called x. Instead, you‚Äôre creating an object in memory with the value 10 and then attaching the label x to it.">
  <meta property="og:locale" content="en_gb">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-08-12T22:31:19+02:00">
    <meta property="article:modified_time" content="2025-08-12T22:31:19+02:00">
    <meta property="article:tag" content="Programming">
    <meta property="article:tag" content="Python">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Labels, not boxes">
  <meta name="twitter:description" content="One of my favourite topics is how variables work in Python. Python‚Äôs variables don‚Äôt store the data itself, instead they act as references to objects in memory. Python doesn‚Äôt have pointers but in reality, I would argue it just hides them in plain sight!
Disclaimer: This post is insired by material from the excellent book by Luciano Ramalho, Fluent Python
Variables as Labels üè∑Ô∏è Think of a variable as a label that you can attach to an object. When you write x = 10, you‚Äôre not putting the number 10 into a box called x. Instead, you‚Äôre creating an object in memory with the value 10 and then attaching the label x to it.">
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@1,500&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Fira+Sans&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Roboto+Mono" rel="stylesheet">

	
	<link rel="stylesheet" type="text/css" media="screen" href="http://localhost:1313/css/main.6a0f23ea50fd34b46fee262a5a68e17d458c51a2bc99ba1ba018065de6b180c3.css" />
		<link id="darkModeStyle" rel="stylesheet" type="text/css" href="http://localhost:1313/css/dark.50b57e12d401420df23965fed157368aba37b76df0ecefd0b1ecd4da664f01a0.css"   />
</head>
<body>
        <div class="content"><header>
	<div class="main">
		<a href="http://localhost:1313/">jradhima</a>
	</div>
	<nav>
		
		<a href="/">Home</a>
		
		<a href="/posts">All posts</a>
		
		<a href="/about">About</a>
		
		<a href="/tags">Tags</a>
		
		
	</nav>
</header>

<main>
  <article>
    <div class="post-container">
      
      <div class="post-content">
        <div class="title">
          <h1 class="title">Labels, not boxes</h1>
          <div class="meta">Posted on Aug 12, 2025 <span class="draft-label">DRAFT</span> </div>
        </div>
        
        <section class="body">
          <p>One of my favourite topics is how variables work in Python. Python&rsquo;s variables don&rsquo;t store the data itself, instead they act as references to objects in memory. Python doesn&rsquo;t have pointers but in reality, I would argue it just hides them in plain sight!</p>
<p><em>Disclaimer: This post is insired by material from the excellent book by Luciano Ramalho, Fluent Python</em></p>
<h3 id="variables-as-labels-">Variables as Labels üè∑Ô∏è</h3>
<p>Think of a variable as a <strong>label</strong> that you can attach to an object. When you write <code>x = 10</code>, you&rsquo;re not putting the number <code>10</code> into a box called <code>x</code>. Instead, you&rsquo;re creating an object in memory with the value <code>10</code> and then attaching the label <code>x</code> to it.</p>
<p>There is nothing stopping you from attaching many labels to the same object. Doing so does not multiply the number of objects. It&rsquo;s still the same object, it just has multiple labels attached to it.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># The variable &#39;a&#39; is a reference to integer value 10</span>
</span></span><span style="display:flex;"><span>a <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;The ID of the object that variable &#39;a&#39; references is: </span><span style="color:#e6db74">{</span>id(a)<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># The variable &#39;b&#39; is also a reference to the same integer object 10</span>
</span></span><span style="display:flex;"><span>b <span style="color:#f92672">=</span> a
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;The ID of the object that variable &#39;b&#39; references is: </span><span style="color:#e6db74">{</span>id(b)<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &#39;a&#39; and &#39;b&#39; point to the same object in memory</span>
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;Is a the same object as b? </span><span style="color:#e6db74">{</span>a <span style="color:#f92672">is</span> b<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span></code></pre></div><p>In the example above, <code>a</code> and <code>b</code> both reference the same object with the value <code>10</code>. The <code>id()</code> function returns the unique identifier of an object, specifically its memory address, proving the labels point to the same object.</p>
<hr>
<h3 id="reassigning-variables">Reassigning Variables</h3>
<p>When you reassign a variable, you&rsquo;re not changing the original object. You&rsquo;re simply detaching the label from the old object and attaching it to a new one.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>a <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;ID before reassigning: </span><span style="color:#e6db74">{</span>id(a)<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>a <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;another object&#34;</span>
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;ID after reassigning: </span><span style="color:#e6db74">{</span>id(a)<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># The ID has changed, because &#39;a&#39; now points to a string object in a different memory address.</span>
</span></span></code></pre></div><p>Why is this interesting or useful, at all? So far it&rsquo;s really not, it&rsquo;s just an implementation detail. However, in combination with another aspect of Python it can have significant impact on the code you write, either in the form of bugs or performance. That aspect is object mutability.</p>
<hr>
<h3 id="mutable-vs-immutable-objects-">Mutable vs. Immutable Objects üóÇÔ∏è</h3>
<p>The distinction between <strong>mutable</strong> and <strong>immutable</strong> objects is crucial here.</p>
<ul>
<li><strong>Immutable objects</strong> (like strings, integers, and tuples) cannot be changed after they are created. When you &ldquo;modify&rdquo; them, you are actually creating a new object and <strong>reassigning</strong> the variable.</li>
<li><strong>Mutable objects</strong> (like lists, dictionaries, and sets) can be changed in place without creating a new object.</li>
</ul>
<p>Let&rsquo;s see this with a list:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>list1 <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>]
</span></span><span style="display:flex;"><span>list2 <span style="color:#f92672">=</span> list1  <span style="color:#75715e"># list2 now references the *same* list object as list1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;ID of list1: </span><span style="color:#e6db74">{</span>id(list1)<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;ID of list2: </span><span style="color:#e6db74">{</span>id(list2)<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Now, we modify the list through list1</span>
</span></span><span style="display:flex;"><span>list1<span style="color:#f92672">.</span>append(<span style="color:#ae81ff">4</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;list1: </span><span style="color:#e6db74">{</span>list1<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;list2: </span><span style="color:#e6db74">{</span>list2<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>) <span style="color:#75715e"># list2 shows the change because they reference the same object</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;ID of list1 after modification: </span><span style="color:#e6db74">{</span>id(list1)<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;ID of list2 after modification: </span><span style="color:#e6db74">{</span>id(list2)<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># The IDs are the same because the object was modified in place.</span>
</span></span></code></pre></div><p>This behavior is why you have to be careful when working with mutable objects. Attaching a new variable does not create a copy, it just adds another label to an existing object. This is a good thing because it allows one to be efficient with memory. Imagine working with a very large list: referencing allows you to simply pass around the reference to the object instead of copying it all the time!</p>
<p>It is also thing you need to be careful about because sharing data between functions can unintentionally modify them.</p>
<hr>
<h3 id="passing-by-reference-">Passing by reference ‚¨ÖÔ∏è</h3>
<p>Some languages have a split behaviour when passing arguments to functions: they do passing-by-value for certain types and passing-by-reference for other types. When passing-by-value, the function gets a copy of the data which it can modify or delete and it leaves the original value intact. When passing-by-reference, functions get a reference to the data which means they can access the original object. Modifying it modifies it everywhere.</p>
<p>In Python, sometimes you can modify the value and other times you cannot. So does it follow the same split behaviour? Nope! Python mimics this split behavior with the combination of mutable/immutable types and always passing-by-reference.</p>
<p>Let&rsquo;s see a couple of examples that will make the above concrete. Below is a function that receives a dictionary, pops the last key-value pair inserted, then returns <code>None</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># this will modify the dictionary</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">modify</span>(d: dict) <span style="color:#f92672">-&gt;</span> <span style="color:#66d9ef">None</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> d:
</span></span><span style="display:flex;"><span>        d<span style="color:#f92672">.</span>popitem()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>obj <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;john&#34;</span>, <span style="color:#e6db74">&#34;surname&#34;</span>: <span style="color:#e6db74">&#34;doe&#34;</span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>modify(obj)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;obj: </span><span style="color:#e6db74">{</span>obj<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)  <span style="color:#75715e"># should print obj: {&#34;name&#34;: &#34;john&#34;}</span>
</span></span></code></pre></div><p>This function modifies the dictionary because a dictionary is mutable. When passed as an argument, the function gets a label to the underlying object as a variable so any action is happening against the underlying object. This makes the modification persistent.</p>
<p>Below is a similar function that receives an integer, increments it by one, then returns <code>None</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># this will modify the dictionary</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">modify</span>(d: int) <span style="color:#f92672">-&gt;</span> <span style="color:#66d9ef">None</span>:
</span></span><span style="display:flex;"><span>    d <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>obj <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>modify(obj)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;obj: </span><span style="color:#e6db74">{</span>obj<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)  <span style="color:#75715e"># should print &#34;d: 1&#34;</span>
</span></span></code></pre></div><p>This function fails to modify the passed integer because an integer is immutable. The function again gets a label to the underlying object as a variable but when it tries to increment it, Python creates a new integer object with the value <code>d + 1</code> and assigns the label <code>d</code> to it. The original object still remains intact with the original <code>obj</code> variable still pointing to it.</p>
<hr>
<h3 id="sometimes-copying-is-good-">Sometimes copying is good üñ®Ô∏è</h3>
<p>This does not mean that you can never modify immutable values, nor that you can never share mutable ones out of fear of modifications. Well&hellip; actually&hellip; it means <strong>exactly</strong> that, but at the same time there is a very simple solution to the problem and we&rsquo;re already almost at the end! The first part of the solution is understanding how variables and mutability work. The second, is working around the situation.</p>
<p>The example below shows that Python provides easy ways to create copies of mutable objects. This way, you take on the performance overhead of duplicating the object data but you get safety back!</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code class="language-python" data-lang="python"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#75715e"># this will modify the dictionary</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">modify_not</span>(d: dict) <span style="color:#f92672">-&gt;</span> <span style="color:#66d9ef">None</span>:
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>    <span style="color:#66d9ef">if</span> d:
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>        d<span style="color:#f92672">.</span>popitem()
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>    <span style="color:#66d9ef">return</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>obj <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;john&#34;</span>, <span style="color:#e6db74">&#34;surname&#34;</span>: <span style="color:#e6db74">&#34;doe&#34;</span>}
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>
</span></span><span style="display:flex; background-color:#3c3d38"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>modify(obj<span style="color:#f92672">.</span>copy())  <span style="color:#75715e"># pass a copy of the object!</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;obj: </span><span style="color:#e6db74">{</span>obj<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)  <span style="color:#75715e"># should print obj: {&#34;name&#34;: &#34;john&#34;, &#34;surname&#34;: &#34;doe&#34;}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>modify(dict(obj))  <span style="color:#75715e"># another way to make a copy is with the constructor functions!</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;obj: </span><span style="color:#e6db74">{</span>obj<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)  <span style="color:#75715e"># should print obj: {&#34;name&#34;: &#34;john&#34;, &#34;surname&#34;: &#34;doe&#34;}</span>
</span></span></code></pre></div><p>To modify immutable values you simply have to store the reference to the newly created object. This way the label <code>obj</code> is now pointing to the new, incremented integer object and forgets about the original one. It is <em>as if</em> you modified an immutable object.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code class="language-python" data-lang="python"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#75715e"># this will modify the dictionary</span>
</span></span><span style="display:flex; background-color:#3c3d38"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">modify</span>(d: int) <span style="color:#f92672">-&gt;</span> int:
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>    d <span style="color:#f92672">=</span> d <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex; background-color:#3c3d38"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>    <span style="color:#66d9ef">return</span> d
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>obj <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>
</span></span><span style="display:flex; background-color:#3c3d38"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>obj <span style="color:#f92672">=</span> modify(obj)
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;obj: </span><span style="color:#e6db74">{</span>obj<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)  <span style="color:#75715e"># should print &#34;d: 1&#34;</span>
</span></span></code></pre></div><hr>
<h3 id="the-devil-is-in-the-details-">The devil is in the details üòà</h3>
<p>The final boss of this topic are nested objects. In Python, anything is allowed and this means lists in lists in lists, lists of dictionaries, tuples with dictionaries and lists of strings, etc.</p>
<p>The copying techniques we&rsquo;ve discussed so far, like list.copy() or dict.copy(), create shallow copies. This works great for simple lists of numbers or strings, but it can lead to unexpected behavior with nested mutable objects.</p>
<p>A shallow copy creates a new container object (e.g., a new list or dictionary) but populates it with references to the same nested objects from the original. This makes sense because these container objects are essentially a data structure of labels, not of actual data. Copying them only copies the top-level labels, not the objects they point to. If you modify a nested mutable object in the copied container, the original will also be affected because they both point to the same nested object.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#75715e"># A nested list, containing a mutable list inside</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>original_list <span style="color:#f92672">=</span> [[<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>], [<span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>]]
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span><span style="color:#75715e"># Create a shallow copy</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>shallow_copy <span style="color:#f92672">=</span> original_list<span style="color:#f92672">.</span>copy()
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#75715e"># Modify a nested object in the shallow copy</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>shallow_copy[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">0</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">99</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;Original list after shallow copy modification: </span><span style="color:#e6db74">{</span>original_list<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>) <span style="color:#75715e"># This should show [[99, 2], [3, 4]]!</span>
</span></span></code></pre></div><p>To avoid this, you need a deep copy. A deep copy creates a completely new, independent object by recursively copying all the nested objects as well. No matter how many levels deep your data is, a deep copy ensures that every part of the new object is a unique instance.</p>
<p>You can create a deep copy using the copy module in the Python standard library. The copy.deepcopy() function handles the recursive copying for you, making your code safer and more predictable when dealing with complex nested data structures.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> copy
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># A nested list, containing a mutable list inside</span>
</span></span><span style="display:flex;"><span>original_list <span style="color:#f92672">=</span> [[<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>], [<span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>]]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Create a shallow copy</span>
</span></span><span style="display:flex;"><span>shallow_copy <span style="color:#f92672">=</span> original_list<span style="color:#f92672">.</span>copy()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Modify a nested object in the shallow copy</span>
</span></span><span style="display:flex;"><span>shallow_copy[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">0</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">99</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;Original list after shallow copy modification: </span><span style="color:#e6db74">{</span>original_list<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>) <span style="color:#75715e"># This will be changed!</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Create a deep copy</span>
</span></span><span style="display:flex;"><span>deep_copy <span style="color:#f92672">=</span> copy<span style="color:#f92672">.</span>deepcopy(original_list)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Modify a nested object in the deep copy</span>
</span></span><span style="display:flex;"><span>deep_copy[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">0</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">88</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;Original list after deep copy modification: </span><span style="color:#e6db74">{</span>original_list<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>) <span style="color:#75715e"># The original is unchanged!</span>
</span></span></code></pre></div>
        </section>
        <div class="post-tags">
          
          
          <nav class="nav tags">
            <ul class="tags">
              
              <li><a href="/tags/programming">programming</a></li>
              
              <li><a href="/tags/python">python</a></li>
              
            </ul>
          </nav>
          
          
        </div>
      </div>

      
      
    </div>

    </article>
</main>
<footer>
  <div style="display:flex"><a class="soc" href="https://github.com/jradhima/" rel="me" title="GitHub"><svg class="feather">
   <use href="/svg/feather-sprite.51cf5647cb1987f769b616558f2620fd9423d72058490231b391bf6aa3744b55.svg#github" />
</svg></a><a class="border"></a><a class="soc" href="https://linkedin.com/in/yannisradhima/" rel="me" title="Linkedin"><svg class="feather">
   <use href="/svg/feather-sprite.51cf5647cb1987f769b616558f2620fd9423d72058490231b391bf6aa3744b55.svg#linkedin" />
</svg></a><a class="border"></a></div>
  <div class="footer-info">
    2025  <a
      href="https://github.com/athul/archie">Archie Theme</a> | Built with <a href="https://gohugo.io">Hugo</a>
  </div>
</footer>

</div>
    </body>
</html>
